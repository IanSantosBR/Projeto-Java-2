package principal;

import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.Scanner;
//import java.util.ArrayList;




import estoque.Loja;
import estoque.Veículo;
//import estoque.Veículo;

public class Menu {
	
	private static Scanner lêOpção;
	static String chassi = null;
	public static boolean primeiroCarregamento=true;

	public static void main(String[] args) {
		boolean confirmacao=false;//Confirmar se o que foi digitado condiz com as opções
		int opção = 236541789; 
		
		// Carregando Arquivos
		/*if(primeiroCarregamento){
			Loja carregarLoja=new Loja();
			primeiroCarregamento=false;
		}*/
		lêOpção = new Scanner(System.in);
		
		System.out.println("\t ----------------"   );
		System.out.println("\t LOJA DE VEÍCULOS"   );
		System.out.println("\t ---------------- \n");
		System.out.println("1 - Adicionar veículo  \n" + 
				       	   "2 - Remover veículo    \n" +
				       	   "3 - Buscar por chassi  \n" +
				           "4 - Pesquisar veículo  \n" +
				           "5 - Exibir estoque     \n" +
				           "0 - Sair 			   \n" +
				           "---------------------    ");
		System.out.print("Escolha uma opção: ");
		try {
			opção = lêOpção.nextInt();
		} catch (InputMismatchException e) {
			System.err.println("Somente números são permitidos neste campo. \n");
			try {
				Thread.sleep(2000);
			} catch (InterruptedException ex) {
				Thread.currentThread().interrupt();
			  }
			main(args);
		}
		
		switch (opção) {
		case 1:
			System.out.println();
			System.out.println("\t ----------------------------   ");
			System.out.println("\t LOJA DE VEÍCULOS - ADICIONAR   ");
			System.out.println("\t ---------------------------- \n");
			Loja.adicionar();
			main(args);
			break;
			
		case 2: 
			
			while(!confirmacao){
				System.out.println();
				System.out.println("\t ---------------------------- ");
				System.out.println("\t LOJA DE VEÍCULOS - REMOVER ");
				System.out.println("\t ---------------------------- \n");
				System.out.print("Digite o chassi para remover ou 0 para sair: ");
				chassi = lêOpção.next();
				if(chassi==null){
					System.err.println("Chassi não pode ser nulo");
				}
				else if(chassi.equals("0")) confirmacao=true;
				else confirmacao=Loja.remover(chassi);
				
			}
			main(args);
			break;
			
		case 3:
			System.out.println();
			System.out.println("\t ---------------------------------- ");
			System.out.println("\t LOJA DE VEÍCULOS - BUSCAR CHASSI ");
			System.out.println("\t ---------------------------------- \n");
			System.out.println("1 - Buscar Carro  \n" + 
			       	   "2 - Buscar Moto    \n"+ 
			           "---------------------    ");
			System.out.print("Escolha uma opção: ");
			int option = lêOpção.nextInt();
			if(option<3 && option>0){
				System.out.print("Digite o número do chassi: ");
				chassi= lêOpção.next();
				Veículo veículo = Loja.buscarChassi(chassi,option);
				try{
				System.out.printf(veículo.toString());
				} catch(Exception e){
					main(args);
				}
			}
			else{
				System.out.printf("ERRO OPÇÃO INVALIDA");
			}
			/*try {
				System.out.println(veículo.toString());
				Thread.sleep(1500);
			} catch (NullPointerException ex){
				main(args);
			} catch (InterruptedException ex) {
				Thread.currentThread().interrupt();
			  }*/
			main(args);
			break;
			
		case 4:
			System.out.println();
			System.out.println("\t ---------------------------- ");
			System.out.println("\t LOJA DE VEÍCULOS - PESQUISAR ");
			System.out.println("\t ---------------------------- \n");
			ArrayList<Veículo> veículos = new ArrayList<>(Loja.pesquisar());
			if (veículos.isEmpty()){
				System.out.println("Não existem veículos cadastrados.");
			}
			else {
				for (Veículo ve: veículos){
				System.out.println(ve.toString());
				}
			}
			break;
			
		case 5:
			System.out.println("\t ----------------------------- ");
			System.out.println("\t LOJA DE VEÍCULOS - LISTAR ");
			System.out.println("\t ----------------------------- ");
			Loja.listar();
			main(args);
			break;
			
		case 236541789:
			System.exit(0);
			
		case 0:
			System.out.print("Fechando o programa... ");
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				Thread.currentThread().interrupt();
			  }
			System.out.println("Terminou.");
			break;
			
		default:
			System.err.println("A opção escolhida é inválida, tente novamente. \n");
			try {
				Thread.sleep(2000);
			} catch (InterruptedException e) {
				Thread.currentThread().interrupt();
			  }
			main(args);
		}
	}
}	
	
